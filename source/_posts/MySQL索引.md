---
title: MySQL索引
date: 2023-11-08 20:33:41
tags: 数据库
categories: MySQL
---

# 索引

# 什么是索引

+ 数据的目录
+ 存储引擎定义了如何在磁盘上存储数据,以及如何为存储的数据建立索引以及更新,查询数据等技术的实现方法。

# 索引的分类

## 按数据结构分类

B+Tree 索引, Hash 索引、


## 按字段个数分类

按照建立索引的字段个数,将索引分为单列索引、联合索引(复合索引)。

+ 建立在单列上的索引称为单列索引，主键索引。
+ 建立在多个列上的索引称为联合索引，也叫做复合索引。

### 联合索引

通过将多个字段组合成一个索引,该索引就被称为联合索引。

```SQL
# 在创建表之后创建联合索引的语句
CREATE INDEX 索引名 ON 表名(索引列1, 索引列2...)
```

1. B+Tree中非叶子结点中的key排序根据建立索引时索引列的顺序进行排序。
    + 在查询数据时，先比较索引列1，当索引列1相等时，在比较索引列2
    + 联合索引的B+Tree也是按照以上顺序进行建立的。
2. 使用联合索引时，存在最左匹配原则，也就是按照最左优先的方式进行索引的匹配。在使用联合索引进行查询的时候，如果不遵循**最左匹配原则**，联合索引就会失效，
这样就无法利用索引快速查询的特性了。

> 如果创建了一个(a, b, c)联合索引
> 
> 当查询条件为以下情况时
>
> + `WHERE a = 1;`
>
> + `WHERE a = 1 and b = 1`




# 有什么优化索引的方法

## 前缀索引优化

**前缀索引简介**

+ 使用某个字段中的前几个字符建立索引。
+ 前缀索引的适用数据类型
    * binary
+ 使用前缀索引是为了减少索引字段的大小，可以增加一个索引页中存储的索引值，有效提高索引的查询速度。在一些大字符串的字段作为索引时，使用前缀索引可以帮助我们减少索引项的大小

**前缀索引不适用的场景**

1. order by 就无法使用前缀索引。

前缀索引的顺序并不能代表数据的真实顺序。

2. 无法把前缀索引用作覆盖索引

覆盖索引是索引使用的字段就是要查询的值。前缀索引只是使用字段的前几位当成索引,并不能查询到该字段的真实值。因此不能把前缀索引用作覆盖索引。

## 覆盖索引优化

**覆盖索引简介**

覆盖索引是指SQL中query的所有字段,在索引B+Tree的叶子结点上都能找得到的那些索引，从二级索引中查询得到记录，而不需要通过聚簇索引查询获得，可以避免回表的操作。